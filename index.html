<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golf Anmeldung</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
}

.controls {
  margin-bottom: 15px;
}

.table-wrapper {
  overflow-x: auto;
}

table {
  border-collapse: collapse;
  width: 100%;
  min-width: 800px;
}

th, td {
  border: 1px solid #ccc;
  padding: 6px;
  text-align: center;
}

th {
  background: #f2f2f2;
}

.weekend {
  background-color: #eeeeee;
}

/* Sticky columns */
.sticky1 {
  position: sticky;
  left: 0;
  background: white;
  z-index: 3;
  min-width: 120px;
}

.sticky2 {
  position: sticky;
  left: 120px;
  background: white;
  z-index: 3;
  min-width: 80px;
}
</style>
</head>
<body>

<h1>Golf Anmeldung</h1>

<div class="controls">
  <label>Ort:
    <select id="ortFilter">
      <option value="alle">Alle</option>
      <option value="AM">AM</option>
      <option value="DS">DS</option>
      <option value="AD">AD</option>
    </select>
  </label>
</div>

<div class="table-wrapper">
  <table>
    <thead>
      <tr id="headerRow"></tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  console.log("Script gestartet");

  const personen = ["Lorenzon Dario", "Gruber Beatrice", "Stanek Sandra"];

  const daten = [
    { datum: "01.12.2025", ort: "AM" },
    { datum: "02.12.2025", ort: "" },
    { datum: "03.12.2025", ort: "AM" },
    { datum: "04.12.2025", ort: "DS" },
    { datum: "05.12.2025", ort: "AM" },
    { datum: "06.12.2025", ort: "" },
    { datum: "07.12.2025", ort: "AD" },
    { datum: "08.12.2025", ort: "DS" }
  ];

  function istWochenende(datumString) {
    const parts = datumString.split(".");
    const date = new Date(parts[2], parts[1] - 1, parts[0]);
    const tag = date.getDay();
    return tag === 0 || tag === 6;
  }

  function renderTabelle() {

    console.log("Render gestartet");

    const ortFilter = document.getElementById("ortFilter").value;
    const headerRow = document.getElementById("headerRow");
    const tableBody = document.getElementById("tableBody");

    headerRow.innerHTML = "";
    tableBody.innerHTML = "";

    // Header
    let headerHTML = `
      <th class="sticky1">Datum</th>
      <th class="sticky2">Ort</th>
    `;

    personen.forEach(p => {
      headerHTML += `<th>${p}</th>`;
    });

    headerRow.innerHTML = headerHTML;

    // Rows
    daten.forEach((eintrag, index) => {

      if (ortFilter !== "alle" && eintrag.ort !== ortFilter) return;

      const tr = document.createElement("tr");

      if (istWochenende(eintrag.datum)) {
        tr.classList.add("weekend");
      }

      let rowHTML = `
        <td class="sticky1">${eintrag.datum}</td>
        <td class="sticky2">${eintrag.ort}</td>
      `;

      personen.forEach((p, pIndex) => {
        rowHTML += `
          <td>
            <input type="checkbox">
          </td>
        `;
      });

      tr.innerHTML = rowHTML;
      tableBody.appendChild(tr);
    });
  }

  document.getElementById("ortFilter")
    .addEventListener("change", renderTabelle);

  renderTabelle();
});
</script>

</body>
</html>
