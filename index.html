<script>
let table;

function filterOrt(value) {
  if (table) {
    table.column(4).search(value).draw();
  }
}

document.addEventListener("DOMContentLoaded", function () {

  Papa.parse("golfplan.csv", {
    download: true,
    delimiter: ";",
    skipEmptyLines: true,
    complete: function(results) {

      const rows = results.data;
      const headers = rows[0];
      const data = rows.slice(1);

      const maxCols = headers.length;

      // Zeilen normieren
      const normalizedData = data.map(row => {
        while (row.length < maxCols) row.push("");
        return row;
      });

      // Header EINMAL sauber setzen
      const theadRow =
        '<tr>' + headers.map(h => `<th>${h}</th>`).join('') + '</tr>';
      document.querySelector('#golfTable thead').innerHTML = theadRow;

      // DataTable starten
      table = $('#golfTable').DataTable({
        data: normalizedData,
        pageLength: 50,
        autoWidth: false,
        deferRender: true,
        columns: headers.map(() => ({ defaultContent: "" }))
      });

    }
  });

});
</script>
