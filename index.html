<script>
let table;

function filterOrt(value) {
  table.column(4).search(value).draw(); // Spalte E
}

Papa.parse("golfplan.csv", {
  download: true,
  delimiter: ";",
  skipEmptyLines: true,
  complete: function(results) {

    const rows = results.data;

    // Erste Zeile = Header
    const headers = rows[0];

    // Rest = Daten
    const data = rows.slice(1);

    // Maximale Spaltenanzahl ermitteln
    const maxCols = headers.length;

    // Jede Zeile auf gleiche LÃ¤nge bringen
    const normalizedData = data.map(row => {
      while (row.length < maxCols) {
        row.push("");
      }
      return row;
    });

    // Header bauen
    $('#golfTable thead').append(
      '<tr>' + headers.map(h => `<th>${h}</th>`).join('') + '</tr>'
    );

// Header fix einsetzen
const theadRow = '<tr>' + headers.map(h => `<th>${h}</th>`).join('') + '</tr>';
$('#golfTable thead').html(theadRow);

// DataTable ERST NACHDEM der Header fix ist
table = $('#golfTable').DataTable({
  data: normalizedData,
  autoWidth: false,
  deferRender: true,
  pageLength: 50,
  columns: headers.map(() => ({ defaultContent: "" }))
});

  }
});
</script>

